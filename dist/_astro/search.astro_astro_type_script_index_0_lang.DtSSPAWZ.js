(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},d=new r.Error().stack;d&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[d]="0fc5245d-7753-4a66-8538-d4f54efc2634",r._sentryDebugIdIdentifier="sentry-dbid-0fc5245d-7753-4a66-8538-d4f54efc2634")}catch{}})();document.addEventListener("astro:page-load",()=>{const r=document.getElementById("main-search-input"),d=document.querySelectorAll(".tag-filter"),m=document.getElementById("sort-select"),p=document.getElementById("results-container"),l=document.getElementById("search-status"),c=document.getElementById("no-results"),$=document.getElementById("clear-search"),k=document.documentElement.lang;if(!r)return;let u=[],h=[],g="all",w="date-desc",f=!1;document.addEventListener("keydown",t=>{(t.metaKey||t.ctrlKey)&&t.key==="k"&&(t.preventDefault(),r.focus())});function L(t,e){let n;return function(...o){clearTimeout(n),n=window.setTimeout(()=>t.apply(this,o),e)}}async function x(){const t=r.value.toLowerCase().trim();if(!t){u=[],y(),b(0,t);return}if(!f){f=!0,l.innerHTML=`
        <div class="flex items-center justify-center">
          <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-primary-600 dark:text-primary-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          Searching...
        </div>
      `,c.style.display="none",p.innerHTML="";try{const e=await fetch(`/api/search?q=${encodeURIComponent(t)}&lang=${k}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);u=await e.json()}catch(e){console.error("Search API fetch error:",e),l.textContent="Search failed. Please try again.",u=[],y()}finally{f=!1}}}function y(){let t=[...u];g!=="all"&&(t=t.filter(e=>e.tags&&e.tags.includes(g))),t.sort((e,n)=>{const o=e.title||"",i=n.title||"",a=new Date(e.pubDate),s=new Date(n.pubDate);switch(w){case"date-asc":return a.getTime()-s.getTime();case"title-asc":return o.localeCompare(i);case"title-desc":return i.localeCompare(o);case"date-desc":default:return s.getTime()-a.getTime()}}),h=t,T(h),b(h.length,r.value.toLowerCase().trim())}function T(t){p.innerHTML="",t.length===0&&r.value.toLowerCase().trim()?(c.style.display="block",l.style.display="none"):(c.style.display="none",l.style.display="block"),t.forEach(e=>{const n=document.createElement("div");n.className="post-item p-6 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300";let o="";e.tags&&e.tags.length>0&&(o=e.tags.slice(0,3).map(i=>`<span class="inline-block bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 text-xs font-medium mr-2 px-2.5 py-0.5 rounded-full">${i}</span>`).join("")),n.innerHTML=`
          ${e.heroImage?`<img src="${e.heroImage}" alt="${e.title}" class="w-full h-40 object-cover rounded-t-lg mb-4">`:""}
          <h3 class="text-xl font-semibold mb-2 text-gray-900 dark:text-gray-100">
            <a href="${e.url}" class="hover:underline">${e.title}</a>
          </h3>
          <p class="text-gray-600 dark:text-gray-300 text-sm mb-3">${e.description.substring(0,100)}${e.description.length>100?"...":""}</p>
          <div class="text-xs text-gray-500 dark:text-gray-400 mb-3">
            <span>${e.pubDate}</span>
            ${e.readingTime?`<span> · ${e.readingTime}</span>`:""}
          </div>
          <div class="mb-3">${o}</div>
          <a href="${e.url}" class="text-sm font-medium text-primary-600 dark:text-primary-400 hover:underline">Read more &rarr;</a>
        `,p.appendChild(n)})}function b(t,e){const n=document.documentElement.lang,o={en:{found:(a,s)=>`Found ${a} article${a===1?"":"s"} matching "${s}"`,showing:a=>`Showing all ${a} articles`,tagged:(a,s)=>`Showing ${a} article${a===1?"":"s"} tagged with "${s}"`},es:{found:(a,s)=>`Se encontraron ${a} artículo${a===1?"":"s"} que coinciden con "${s}"`,showing:a=>`Mostrando todos los ${a} artículos`,tagged:(a,s)=>`Mostrando ${a} artículo${a===1?"":"s"} etiquetado${a===1?"":"s"} con "${s}"`},ja:{found:(a,s)=>`"${s}"に一致する${a}件の記事が見つかりました`,showing:a=>`${a}件の記事をすべて表示`,tagged:(a,s)=>`"${s}"でタグ付けされた${a}件の記事を表示`}},i=o[n]||o.en;e?t===0?(l.style.display="none",c.style.display="block"):(l.style.display="block",c.style.display="none",l.textContent=i.found(t,e)):(l.style.display="block",c.style.display="none",g==="all"?l.textContent=i.showing(t):l.textContent=i.tagged(t,g))}const E=L(x,300);r.addEventListener("input",()=>{E()}),d.forEach(t=>{t.addEventListener("click",()=>{d.forEach(e=>{e.classList.remove("active","bg-primary-600","text-white"),e.classList.add("border-gray-300","dark:border-gray-600","text-gray-700","dark:text-gray-300")}),t.classList.add("active","bg-primary-600","text-white"),t.classList.remove("border-gray-300","dark:border-gray-600","text-gray-700","dark:text-gray-300"),g=t.getAttribute("data-tag")||"all",y()})}),m.addEventListener("change",()=>{w=m.value,y()}),$?.addEventListener("click",()=>{r.value="",g="all",u=[],d.forEach(e=>{e.classList.remove("active","bg-primary-600","text-white"),e.classList.add("border-gray-300","dark:border-gray-600","text-gray-700","dark:text-gray-300")});const t=document.querySelector('.tag-filter[data-tag="all"]');t&&(t.classList.add("active","bg-primary-600","text-white"),t.classList.remove("border-gray-300","dark:border-gray-600","text-gray-700","dark:text-gray-300")),y(),r.focus()});const v=new URLSearchParams(window.location.search).get("q");v?(r.value=v,x()):b(0,"")});
