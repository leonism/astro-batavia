---
import { getLangFromUrl } from '@/i18n/utils';
import type { LanguageKey } from '@/i18n/types';

import NavigationHeaderLogo from './NavigationHeaderLogo.astro';
import NavigationHeaderNavLinks from './NavigationHeaderNavLinks.astro';
import NavigationHeaderUtilities from './NavigationHeaderUtilities.astro';
import NavigationMobileMenu from './NavigationMobileMenu.astro';
import NavigationSearchToggle from './NavigationSearchToggle.astro';

const lang = getLangFromUrl(Astro.url) as LanguageKey;
const currentPath = Astro.url.pathname;
---

<header
  class="fixed top-0 z-50 w-full border-b border-slate-200/50 bg-white/50 backdrop-blur-xl dark:border-slate-700/50 dark:bg-slate-900/80"
  aria-label="Main navigation"
>
  <nav class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8" role="navigation">
    <div class="flex h-16 items-center justify-between">
      <NavigationHeaderLogo lang={lang} />
      <div class="hidden items-center gap-5 md:flex">
        <NavigationHeaderNavLinks lang={lang} currentPath={currentPath} variant="desktop" />
      </div>
      <div class="flex items-center">
        <NavigationSearchToggle />
        <NavigationHeaderUtilities />
      </div>
    </div>
  </nav>
</header>
<NavigationMobileMenu />
