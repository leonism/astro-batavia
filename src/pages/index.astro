---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import { useTranslations } from "@/i18n/utils";

// Get latest blog posts in English
const allPosts = await getCollection(
  "blog",
  ({ id, data }: { id: string; data: { draft: boolean } }) => {
    return id.startsWith("en/") && !data.draft;
  }
);

// Sort posts by publication date (newest first)
const sortedPosts = allPosts.sort(
  (a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
    b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
const latestPosts = sortedPosts.slice(0, 3);

const lang = "en";
const t = useTranslations(lang);
---

<Layout
  title="Astro Batavia - Modern Multi-Language Blog"
  description={t("meta.description")}
  lang={lang}>
  <!-- Hero Section with Atega-style design -->
  <section
    class="relative min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900">
    <!-- Background decorative elements -->
    <div class="absolute inset-0 overflow-hidden">
      <div
        class="absolute -top-40 -right-32 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-600/20 rounded-full blur-3xl">
      </div>
      <div
        class="absolute -bottom-32 -left-40 w-80 h-80 bg-gradient-to-tr from-indigo-400/20 to-cyan-400/20 rounded-full blur-3xl">
      </div>
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <!-- Main headline -->
      <div class="space-y-8">
        <h1
          class="text-5xl sm:text-6xl lg:text-7xl xl:text-8xl font-bold tracking-tight">
          <span class="block text-slate-900 dark:text-white">Beautiful</span>
          <span
            class="block bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent">
            Multi-Language
          </span>
          <span class="block text-slate-900 dark:text-white">Blog</span>
        </h1>

        <p
          class="max-w-2xl mx-auto text-lg sm:text-xl text-slate-600 dark:text-slate-300 leading-relaxed">
          Experience the future of blogging with our lightning-fast, beautifully
          designed platform built with Astro.js
        </p>

        <!-- CTA Buttons -->
        <div
          class="flex flex-col sm:flex-row gap-4 justify-center items-center pt-8">
          <a
            href="/blog"
            class="group inline-flex items-center px-8 py-4 text-lg font-semibold text-white bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/25">
            Start Reading
            <svg
              class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"
              ></path>
            </svg>
          </a>

          <a
            href="/search"
            class="group inline-flex items-center px-8 py-4 text-lg font-semibold text-slate-700 dark:text-slate-300 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-2 border-slate-200 dark:border-slate-700 rounded-2xl hover:bg-white dark:hover:bg-slate-800 focus:outline-none focus:ring-4 focus:ring-slate-500/50 transition-all duration-300 hover:scale-105">
            <svg
              class="mr-2 w-5 h-5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
              ></path>
            </svg>
            Explore Content
          </a>
        </div>
      </div>

      <!-- Scroll indicator -->
      <div
        class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
        <div
          class="w-6 h-10 border-2 border-slate-400 dark:border-slate-600 rounded-full flex justify-center">
          <div
            class="w-1 h-3 bg-slate-400 dark:bg-slate-600 rounded-full mt-2 animate-pulse">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Content Section -->
  <section class="py-24 bg-white dark:bg-slate-900">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Section header -->
      <div class="text-center mb-16">
        <h2
          class="text-4xl sm:text-5xl font-bold text-slate-900 dark:text-white mb-6">
          Featured <span
            class="text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text"
            >Stories</span
          >
        </h2>
        <p class="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
          Discover insights, tutorials, and stories from our community of
          developers and creators
        </p>
      </div>

      <!-- Content Grid -->
      {
        latestPosts.length > 0 && (
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-16">
            {latestPosts.map((post: CollectionEntry<"blog">, index: number) => (
              <article
                class={`group relative overflow-hidden rounded-3xl ${
                  index === 0
                    ? "lg:col-span-2 lg:row-span-2 h-96 lg:h-[600px]"
                    : "h-80"
                }`}>
                <div class="absolute inset-0 bg-gradient-to-br from-blue-600/90 via-purple-600/90 to-indigo-600/90 group-hover:from-blue-700/90 group-hover:via-purple-700/90 group-hover:to-indigo-700/90 transition-all duration-500" />

                <div class="relative h-full p-8 lg:p-12 flex flex-col justify-end text-white">
                  <div class="space-y-4">
                    <div class="flex items-center space-x-4 text-blue-200">
                      <span class="text-sm font-medium">
                        {post.data.author}
                      </span>
                      <span class="w-1 h-1 bg-blue-200 rounded-full" />
                      <time class="text-sm">
                        {new Date(post.data.pubDate).toLocaleDateString(
                          "en-US",
                          {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                          }
                        )}
                      </time>
                    </div>

                    <h3
                      class={`font-bold leading-tight ${
                        index === 0
                          ? "text-3xl lg:text-4xl"
                          : "text-xl lg:text-2xl"
                      }`}>
                      {post.data.title}
                    </h3>

                    <p
                      class={`text-blue-100 leading-relaxed ${
                        index === 0 ? "text-lg max-w-2xl" : "text-base"
                      }`}>
                      {post.data.description}
                    </p>

                    <div class="flex flex-wrap gap-2 pt-4">
                      {post.data.tags.slice(0, 3).map((tag: string) => (
                        <span class="px-3 py-1 text-xs font-medium bg-white/20 backdrop-blur-sm rounded-full">
                          {tag}
                        </span>
                      ))}
                    </div>
                  </div>

                  <a
                    href={`/blog/${post.slug}`}
                    class="absolute inset-0 z-10"
                    aria-label={`Read article: ${post.data.title}`}
                  />
                </div>
              </article>
            ))}
          </div>
        )
      }

      <!-- View all link -->
      <div class="text-center">
        <a
          href="/blog"
          class="group inline-flex items-center px-8 py-4 text-lg font-semibold text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-2xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all duration-300 hover:scale-105">
          View All Articles
          <svg
            class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 7l5 5m0 0l-5 5m5-5H6"
            ></path>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="py-24 bg-slate-50 dark:bg-slate-800">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2
          class="text-4xl sm:text-5xl font-bold text-slate-900 dark:text-white mb-6">
          Built for <span
            class="text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text"
            >Performance</span
          >
        </h2>
        <p class="text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
          Experience the perfect blend of speed, accessibility, and modern
          design
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- Feature 1 -->
        <div
          class="group relative p-8 bg-white dark:bg-slate-900 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2">
          <div
            class="absolute top-6 right-6 w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 10V3L4 14h7v7l9-11h-7z"
              ></path>
            </svg>
          </div>

          <h3
            class="text-2xl font-bold text-slate-900 dark:text-white mb-4 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
            Lightning Fast
          </h3>
          <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
            Built with Astro's island architecture for exceptional performance.
            Zero JavaScript by default, hydrate only when needed.
          </p>

          <div
            class="mt-6 flex items-center text-blue-600 dark:text-blue-400 font-medium group-hover:translate-x-2 transition-transform">
            <span class="text-sm">Learn more</span>
            <svg
              class="ml-2 w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"
              ></path>
            </svg>
          </div>
        </div>

        <!-- Feature 2 -->
        <div
          class="group relative p-8 bg-white dark:bg-slate-900 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2">
          <div
            class="absolute top-6 right-6 w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129">
              </path>
            </svg>
          </div>
          <h3
            class="text-2xl font-bold text-slate-900 dark:text-white mb-4 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors">
            Multi-Language
          </h3>
          <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
            Complete internationalization support for English, Spanish, and
            Japanese. Seamless language switching and localized content.
          </p>

          <div
            class="mt-6 flex items-center text-purple-600 dark:text-purple-400 font-medium group-hover:translate-x-2 transition-transform">
            <span class="text-sm">Learn more</span>
            <svg
              class="ml-2 w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"
              ></path>
            </svg>
          </div>
        </div>

        <!-- Feature 3 -->
        <div
          class="group relative p-8 bg-white dark:bg-slate-900 rounded-3xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2">
          <div
            class="absolute top-6 right-6 w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
            <svg
              class="w-6 h-6 text-white"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
              ></path>
            </svg>
          </div>

          <h3
            class="text-2xl font-bold text-slate-900 dark:text-white mb-4 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors">
            Easy Management
          </h3>
          <p class="text-slate-600 dark:text-slate-400 leading-relaxed">
            Git-based CMS with live preview and rich content editing. Version
            control for all your content with seamless publishing workflow.
          </p>

          <div
            class="mt-6 flex items-center text-green-600 dark:text-green-400 font-medium group-hover:translate-x-2 transition-transform">
            <span class="text-sm">Learn more</span>
            <svg
              class="ml-2 w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13 7l5 5m0 0l-5 5m5-5H6"
              ></path>
            </svg>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section
    class="py-24 bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="space-y-8">
        <h2 class="text-4xl sm:text-5xl font-bold text-white mb-6">
          Stay in the Loop
        </h2>
        <p class="text-xl text-blue-100 max-w-2xl mx-auto">
          Get the latest articles, tutorials, and insights delivered straight to
          your inbox. Join our community of developers and creators.
        </p>

        <form class="flex flex-col sm:flex-row gap-4 max-w-lg mx-auto">
          <input
            type="email"
            placeholder="Enter your email address"
            class="flex-1 px-6 py-4 text-lg border-0 rounded-2xl focus:outline-none focus:ring-4 focus:ring-white/50 bg-white/10 backdrop-blur-sm text-white placeholder-blue-100 transition-all duration-300"
            required
          />
          <button
            type="submit"
            class="px-8 py-4 bg-white text-blue-600 font-semibold text-lg rounded-2xl hover:bg-blue-50 focus:outline-none focus:ring-4 focus:ring-white/50 transition-all duration-300 hover:scale-105 hover:shadow-2xl">
            Subscribe
          </button>
        </form>

        <p class="text-sm text-blue-200">
          No spam, unsubscribe at any time. We respect your privacy.
        </p>
      </div>
    </div>
  </section>
</Layout>
