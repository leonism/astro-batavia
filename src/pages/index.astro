---
import Layout from "@/layouts/Layout.astro";
import HeroSection from "@/components/sections/HeroSection.astro";
import FeaturesSection from "@/components/sections/FeaturesSection.astro";
import FeaturedStoriesSection from "@/components/sections/FeaturedStoriesSection.astro";
import NewsletterSection from "@/components/sections/NewsletterSection.astro";
import { useTranslations } from "@/i18n/utils";
import { BlogService } from "@/services/BlogService";

const lang = "en";
const t = useTranslations(lang);

// Get latest blog posts in English using BlogService
const latestPosts = await BlogService.getLatestPosts("en", 3);
---

<Layout
  title="Astro Batavia - Modern Multi-Language Blog"
  description={t("meta.description") as string}
  lang={lang as string}>
  <HeroSection />
  <FeaturesSection />
  <FeaturedStoriesSection latestPosts={latestPosts} />
  <NewsletterSection />
</Layout>
